<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover"/>
  <title>Accent ‚Äî Market of Telegram Gifts</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    :root {
      --bg: #0a011a;
      --accent: #FF2A6D;
      --accent-green: #00FFA3;
      --accent-blue: #00F5FF;
      --card-bg: #140a2a;
      --text: #FFFFFF;
      --text-secondary: #B0A0C0;
    }
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    }
    body {
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      padding: 0;
      overflow-x: hidden;
      font-size: 14px;
    }
    html, body {
      height: 100%;
      overflow: hidden;
    }
    .content {
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;
      padding: 16px;
      min-height: calc(100vh - 140px);
    }
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 16px;
      background: rgba(10, 1, 26, 0.7);
      backdrop-filter: blur(10px);
      position: sticky;
      top: 0;
      z-index: 100;
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    }
    .logo {
      font-size: 1.3rem;
      font-weight: bold;
      color: var(--accent);
      display: flex;
      align-items: center;
      gap: 6px;
    }
    .balance {
      display: flex;
      align-items: center;
      gap: 6px;
      font-weight: bold;
      color: var(--accent-green);
    }
    /* –¢–∞–±—ã */
    .subtabs {
      display: flex;
      padding: 8px 16px;
      background: rgba(20, 10, 42, 0.5);
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    }
    .subtab {
      padding: 6px 16px;
      border-radius: 20px;
      cursor: pointer;
      font-weight: 500;
    }
    .subtab.active {
      background: var(--accent);
      color: black;
      box-shadow: 0 0 8px var(--accent);
    }
    /* –§–∏–ª—å—Ç—Ä—ã */
    .filters {
      display: flex;
      gap: 8px;
      padding: 12px 0;
      overflow-x: auto;
      -webkit-overflow-scrolling: touch;
    }
    .filter-btn {
      background: var(--card-bg);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      padding: 6px 12px;
      font-size: 13px;
      white-space: nowrap;
      cursor: pointer;
      transition: all 0.2s;
    }
    .filter-btn:hover {
      background: rgba(255, 42, 109, 0.2);
    }
    /* –°–µ—Ç–∫–∞ –ø–æ–¥–∞—Ä–∫–æ–≤ */
    .gift-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
      gap: 16px;
      padding: 8px 0 120px 0;
    }
    .gift-card {
      background: var(--card-bg);
      border-radius: 16px;
      overflow: hidden;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      transition: transform 0.2s;
      cursor: pointer;
    }
    .gift-card:hover {
      transform: translateY(-2px);
    }
    .gift-image {
      height: 100px;
      width: 100%;
      background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 32px;
    }
    .gift-info {
      padding: 10px;
    }
    .gift-name {
      font-weight: 600;
      margin-bottom: 4px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    .gift-price {
      color: var(--accent);
      font-weight: bold;
      font-size: 13px;
    }
    /* –ê–∫—Ç–∏–≤–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã */
    .applied-filters {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      padding: 10px 0;
    }
    .applied-filter {
      background: rgba(255, 42, 109, 0.2);
      color: var(--accent);
      padding: 4px 8px;
      border-radius: 12px;
      font-size: 12px;
      display: flex;
      align-items: center;
      gap: 4px;
    }
    .remove-filter {
      cursor: pointer;
      opacity: 0.7;
      margin-left: 4px;
    }
    .remove-filter:hover {
      opacity: 1;
    }
    /* –ù–∏–∂–Ω–µ–µ –º–µ–Ω—é */
    .footer-nav {
      display: flex;
      justify-content: space-around;
      padding: 8px 0;
      background: rgba(10, 1, 26, 0.7);
      backdrop-filter: blur(10px);
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      border-top: 1px solid rgba(255, 255, 255, 0.05);
      z-index: 100;
    }
    .nav-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
      font-size: 12px;
      color: var(--text-secondary);
    }
    .nav-item.active {
      color: var(--accent);
    }
    .nav-icon img {
      height: 21px;
      width: 21px;
    }
    .hidden {
      display: none !important;
    }
    .fab {
      position: fixed;
      bottom: 70px;
      right: 20px;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: var(--accent);
      color: black;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      font-weight: bold;
      box-shadow: 0 4px 12px rgba(255, 42, 109, 0.4);
      cursor: pointer;
      z-index: 99;
      font-family: inherit;
    }
    .fab.hidden {
      display: none;
    }
    /* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ */
    .modal {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.7);
      display: flex;
      align-items: flex-end;
      z-index: 1000;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s;
    }
    .modal.open {
      opacity: 1;
      pointer-events: all;
    }
    .modal-content {
      width: 100%;
      background: var(--card-bg);
      border-radius: 24px 24px 0 0;
      padding: 20px;
      max-height: 85vh;
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;
    }
    .modal-header {
      text-align: center;
      margin-bottom: 20px;
    }
    .modal-title {
      font-size: 18px;
      font-weight: bold;
      margin: 8px 0;
    }
    .modal-description {
      color: var(--text-secondary);
      font-size: 13px;
      line-height: 1.4;
    }
    .modal-btns {
      display: flex;
      gap: 10px;
      margin-top: 20px;
    }
    .modal-btn {
      flex: 1;
      padding: 14px;
      border-radius: 16px;
      font-weight: 600;
      font-size: 15px;
      border: none;
      cursor: pointer;
      transition: all 0.2s;
    }
    .btn-primary {
      background: var(--accent);
      color: black;
    }
    .btn-secondary {
      background: rgba(255, 255, 255, 0.1);
      color: var(--text);
    }
    .btn-buy {
      background: var(--accent-green);
      color: black;
    }
    .modal-close {
      position: absolute;
      top: 12px;
      right: 16px;
      width: 28px;
      height: 28px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      z-index: 1001;
      border-radius: 50%;
      background: transparent;
    }
    .modal-close:hover {
      background: rgba(255, 255, 255, 0.1);
    }
    /* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞ */
    .replenish-modal {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: var(--card-bg);
      border-radius: 16px;
      padding: 24px;
      max-width: 350px;
      width: 90%;
      z-index: 2000;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
      display: none;
    }
    .replenish-modal.open {
      display: block;
    }
    .input-group {
      margin: 16px 0;
    }
    .input-group label {
      display: block;
      margin-bottom: 6px;
      font-size: 14px;
    }
    .input-group input {
      width: 100%;
      padding: 12px;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      color: var(--text);
      font-size: 15px;
    }
    .input-group input:focus {
      outline: none;
      border-color: var(--accent);
    }
    /* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è —Ä–∞–∑–¥–µ–ª–æ–≤ */
    .profile-section {
      display: none;
      padding: 20px;
    }
    .profile-header {
      text-align: center;
      margin-bottom: 20px;
    }
    .avatar {
      width: 80px;
      height: 80px;
      background: var(--accent-blue);
      border-radius: 50%;
      margin: 0 auto 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      color: black;
      font-weight: bold;
    }
    .profile-balance {
      font-size: 1.2rem;
      font-weight: bold;
      color: var(--accent-yellow);
      margin: 12px 0;
    }
    .btn-replenish {
      width: 100%;
      padding: 12px;
      background: var(--accent);
      color: black;
      border: none;
      border-radius: 12px;
      font-weight: bold;
      cursor: pointer;
      margin: 16px 0;
      transition: all 0.2s;
    }
    .btn-replenish:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 8px rgba(255, 42, 109, 0.3);
    }
    /* –°—Ç–∏–ª–∏ –¥–ª—è —Ñ–æ—Ä–º—ã –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–∞–Ω–∞–ª–∞ */
    .add-channel-modal {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: var(--card-bg);
      border-radius: 16px;
      padding: 24px;
      max-width: 350px;
      width: 90%;
      z-index: 2000;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
      display: none;
    }
    .add-channel-modal.open {
      display: block;
    }
    .price-tags {
      display: flex;
      gap: 8px;
      margin: 16px 0;
      flex-wrap: wrap;
    }
    .price-tag {
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      padding: 8px 12px;
      cursor: pointer;
      font-size: 14px;
    }
    .price-tag.active {
      background: var(--accent);
      color: black;
      border-color: var(--accent);
    }
    /* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–æ–≤ */
    .filter-modal {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: var(--card-bg);
      border-radius: 16px;
      padding: 24px;
      max-width: 350px;
      width: 90%;
      z-index: 2000;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
      display: none;
    }
    .filter-modal.open {
      display: block;
    }
    .filter-options {
      display: flex;
      flex-direction: column;
      gap: 12px;
      margin: 16px 0;
    }
    .filter-option {
      padding: 12px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 12px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .filter-option.active {
      background: var(--accent);
      color: black;
    }
    .filter-slider {
      margin: 20px 0;
    }
    .slider-container {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .slider-value {
      min-width: 60px;
      text-align: center;
    }
    input[type="range"] {
      flex: 1;
      height: 8px;
      -webkit-appearance: none;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 4px;
    }
    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: var(--accent);
      cursor: pointer;
    }
    /* –í–∫–ª–∞–¥–∫–∞ "–ú–æ–∏ –ø–æ–¥–∞—Ä–∫–∏" */
    .my-gifts-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
      gap: 16px;
      padding: 8px 0 120px 0;
    }
    .my-gift-card {
      background: var(--card-bg);
      border-radius: 16px;
      overflow: hidden;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      position: relative;
    }
    .gift-status {
      position: absolute;
      top: 8px;
      right: 8px;
      background: var(--accent-green);
      color: black;
      font-size: 11px;
      padding: 2px 6px;
      border-radius: 12px;
      font-weight: bold;
    }
    /* –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å */
    .activity-section {
      display: none;
      padding: 20px;
    }
    .activity-item {
      display: flex;
      gap: 12px;
      padding: 16px 0;
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    }
    .activity-icon {
      width: 40px;
      height: 40px;
      border-radius: 12px;
      background: rgba(255, 42, 109, 0.2);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
    }
    .activity-details {
      flex: 1;
    }
    .activity-title {
      font-weight: 500;
      margin-bottom: 4px;
    }
    .activity-time {
      font-size: 12px;
      color: var(--text-secondary);
    }
    /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
    @media (max-width: 360px) {
      .gift-grid {
        grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
      }
      .modal-btns {
        flex-direction: column;
      }
      .modal-btn {
        width: 100%;
      }
    }
    @media (max-height: 600px) {
      .modal-content {
        max-height: 75vh;
      }
      .content {
        min-height: calc(100vh - 120px);
      }
    }
  </style>
</head>
<body>
  <!-- –®–∞–ø–∫–∞ -->
  <div class="header">
    <div class="logo">
      <img src="accent-logo.png" style="height: 32px; margin-right: 8px;">
    </div>
    <div class="balance" id="header-balance">+ 0 TON</div>
  </div>

  <div class="content" id="main-content">
    <!-- –ú–∞—Ä–∫–µ—Ç -->
    <div id="market-screen">
      <div class="subtabs">
        <div class="subtab active" data-subtab="channels">–ö–∞–Ω–∞–ª—ã</div>
        <div class="subtab" data-subtab="nft">NFT</div>
      </div>
      
      <div class="filters">
        <div class="filter-btn">–ú–æ–¥–µ–ª—å</div>
        <div class="filter-btn">–¶–µ–Ω–∞</div>
        <div class="filter-btn">–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞</div>
      </div>
      
      <div class="applied-filters" id="applied-filters">
        <!-- –ü—Ä–∏–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è —Å—é–¥–∞ -->
      </div>
      
      <div class="gift-grid" id="gifts-container">
        <!-- –ü–æ–¥–∞—Ä–∫–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è —Å—é–¥–∞ -->
      </div>
    </div>
    
    <!-- –ú–æ–∏ –ø–æ–¥–∞—Ä–∫–∏ -->
    <div id="my-gifts-screen" class="hidden">
      <div class="subtabs">
        <div class="subtab active" data-subtab="selling">–ù–∞ –ø—Ä–æ–¥–∞–∂–µ</div>
        <div class="subtab" data-subtab="bought">–ö—É–ø–ª–µ–Ω–Ω—ã–µ</div>
      </div>
      
      <div class="my-gifts-grid" id="my-gifts-container">
        <!-- –ú–æ–∏ –ø–æ–¥–∞—Ä–∫–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è —Å—é–¥–∞ -->
      </div>
    </div>
    
    <!-- –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å -->
    <div id="activity-screen" class="hidden">
      <div class="activity-section">
        <div class="activity-item">
          <div class="activity-icon">üéÅ</div>
          <div class="activity-details">
            <div class="activity-title">–ü—Ä–æ–¥–∞–Ω –ø–æ–¥–∞—Ä–æ–∫ "–ö–∞–Ω–∞–ª"</div>
            <div class="activity-time">–°–µ–≥–æ–¥–Ω—è, 14:30</div>
          </div>
        </div>
        <div class="activity-item">
          <div class="activity-icon">üí∞</div>
          <div class="activity-details">
            <div class="activity-title">–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞</div>
            <div class="activity-time">–°–µ–≥–æ–¥–Ω—è, 10:15</div>
          </div>
        </div>
        <div class="activity-item">
          <div class="activity-icon">üõí</div>
          <div class="activity-details">
            <div class="activity-title">–ö—É–ø–ª–µ–Ω NFT-–∞–≤–∞—Ç–∞—Ä</div>
            <div class="activity-time">–í—á–µ—Ä–∞, 18:45</div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- –ü—Ä–æ—Ñ–∏–ª—å -->
    <div id="profile-screen" class="hidden">
      <div class="profile-section">
        <div class="profile-header">
          <div class="avatar">–ê</div>
          <h3 id="user-name">–ó–∞–≥—Ä—É–∑–∫–∞...</h3>
          <div class="profile-balance" id="profile-balance">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
        </div>
        
        <button class="btn-replenish" id="replenish-btn">–ü–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å</button>
        
        <div style="margin-top: 20px; color: var(--text-secondary); text-align: center; font-size: 13px;">
          <p>–í–∞—à ID: <span id="user-id">-</span></p>
          <p>–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏: <span id="user-registered">-</span></p>
        </div>
      </div>
    </div>
  </div>
  
  <!-- –ù–∏–∂–Ω–µ–µ –º–µ–Ω—é -->
  <div class="footer-nav">
    <div class="nav-item active" data-tab="market">
      <div class="nav-icon">
        <img src="market-icon-active.png" style="height: 21px;">
      </div>
      <div>–ú–∞—Ä–∫–µ—Ç</div>
    </div>
    <div class="nav-item" data-tab="my-gifts">
      <div class="nav-icon">
        <img src="gift-icon.png" style="height: 21px;">
      </div>
      <div>–ú–æ–∏ –ø–æ–¥–∞—Ä–∫–∏</div>
    </div>
    <div class="nav-item" data-tab="activity">
      <div class="nav-icon">
        <img src="activity.png" style="height: 21px;">
      </div>
      <div>–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</div>
    </div>
    <div class="nav-item" data-tab="profile">
      <div class="nav-icon">
        <img src="profile.png" style="height: 21px;">
      </div>
      <div>–ü—Ä–æ—Ñ–∏–ª—å</div>
    </div>
  </div>
  
  <!-- –ö–Ω–æ–ø–∫–∞ FAB -->
  <div class="fab hidden" id="fab-btn">+</div>
  
  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ -->
  <div class="modal" id="gift-modal">
    <div class="modal-content">
      <div class="modal-close" id="modal-close">√ó</div>
      <div class="modal-header">
        <div class="gift-image" id="modal-gift-image">üéÅ</div>
        <div class="modal-title" id="modal-title">–ù–∞–∑–≤–∞–Ω–∏–µ –ø–æ–¥–∞—Ä–∫–∞</div>
        <div class="modal-description" id="modal-description">
          –û–ø–∏—Å–∞–Ω–∏–µ –ø–æ–¥–∞—Ä–∫–∞ –±—É–¥–µ—Ç –∑–¥–µ—Å—å. –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –∫–∞–Ω–∞–ª Telegram, NFT –∏–ª–∏ –¥—Ä—É–≥–æ–π —Ü–∏—Ñ—Ä–æ–≤–æ–π –∞–∫—Ç–∏–≤.
        </div>
      </div>
      <div class="modal-btns" id="modal-buttons">
        <!-- –ö–Ω–æ–ø–∫–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
      </div>
    </div>
  </div>
  
  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞ -->
  <div class="replenish-modal" id="replenish-modal">
    <div class="modal-close" id="replenish-close">√ó</div>
    <div class="modal-header">
      <h3>–ü–æ–¥–∫–ª—é—á–∏—Ç–µ –≤–∞—à TON –∫–æ—à–µ–ª–µ–∫</h3>
      <p>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ö–æ—à–µ–ª–µ–∫ –≤ Telegram –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ –¥—Ä—É–≥–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</p>
    </div>
    <div style="text-align: center; margin: 20px 0;">
      <div class="wallet-icon" style="font-size: 48px; margin: 16px 0; color: #00F5FF;">üëõ</div>
      <h4>TON –ö–æ—à–µ–ª–µ–∫</h4>
    </div>
    <button class="btn btn-primary" style="width: 100%; margin-top: 20px;" id="connect-wallet-btn">
      –ü–æ–¥–∫–ª—é—á–∏—Ç—å –ö–æ—à–µ–ª–µ–∫ –≤ Telegram
    </button>
    <div style="margin-top: 20px; text-align: center; color: var(--text-secondary); font-size: 12px;">
      <p>–ü–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫–æ—à–µ–ª—å–∫–∞ –≤—ã —Å–º–æ–∂–µ—Ç–µ –ø–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å</p>
    </div>
  </div>
  
  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–∞–Ω–∞–ª–∞ -->
  <div class="add-channel-modal" id="add-channel-modal">
    <div class="modal-close" id="add-channel-close">√ó</div>
    <h3>–î–æ–±–∞–≤–∏—Ç—å –∫–∞–Ω–∞–ª –Ω–∞ –ø—Ä–æ–¥–∞–∂—É</h3>
    <div class="input-group">
      <label>–°—Å—ã–ª–∫–∞ –Ω–∞ –∫–∞–Ω–∞–ª</label>
      <input type="text" id="channel-link" placeholder="https://t.me/your_channel">
    </div>
    <div class="input-group">
      <label>–ù–∞–∑–≤–∞–Ω–∏–µ –ø–æ–¥–∞—Ä–∫–∞</label>
      <input type="text" id="gift-name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–∞">
    </div>
    <div class="input-group">
      <label>–¶–µ–Ω–∞ –≤ TON</label>
      <input type="number" id="gift-price" placeholder="0.0" min="0.1" step="0.1">
    </div>
    <button class="btn-primary" style="width: 100%; margin-top: 20px;" id="submit-channel">
      –í—ã—Å—Ç–∞–≤–∏—Ç—å –Ω–∞ –ø—Ä–æ–¥–∞–∂—É
    </button>
  </div>
  
  <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–æ–≤ -->
  <div class="filter-modal" id="model-modal">
    <div class="modal-close" id="model-close">√ó</div>
    <h3>–í—ã–±–µ—Ä–∏—Ç–µ –º–æ–¥–µ–ª—å</h3>
    <div class="filter-options">
      <div class="filter-option" data-model="model1">
        <span>ü§ñ</span> –†–æ–±–æ—Ç
      </div>
      <div class="filter-option" data-model="model2">
        <span>üê±</span> –ö–æ—Ç
      </div>
      <div class="filter-option" data-model="model3">
        <span>ü¶ä</span> –õ–∏—Å–∞
      </div>
    </div>
  </div>
  
  <div class="filter-modal" id="price-modal">
    <div class="modal-close" id="price-close">√ó</div>
    <h3>–î–∏–∞–ø–∞–∑–æ–Ω —Ü–µ–Ω—ã</h3>
    <div class="filter-slider">
      <div class="slider-container">
        <div class="slider-value" id="min-price-value">1 TON</div>
        <input type="range" min="1" max="100" value="1" id="min-price">
      </div>
      <div class="slider-container">
        <div class="slider-value" id="max-price-value">100 TON</div>
        <input type="range" min="1" max="100" value="100" id="max-price">
      </div>
    </div>
    <button class="btn-primary" style="width: 100%; margin-top: 20px;" id="apply-price">
      –ü—Ä–∏–º–µ–Ω–∏—Ç—å
    </button>
  </div>
  
  <div class="filter-modal" id="sort-modal">
    <div class="modal-close" id="sort-close">√ó</div>
    <h3>–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞</h3>
    <div class="filter-options">
      <div class="filter-option active" data-sort="asc">
        <span>‚Üë</span> –ü–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é —Ü–µ–Ω—ã
      </div>
      <div class="filter-option" data-sort="desc">
        <span>‚Üì</span> –ü–æ —É–±—ã–≤–∞–Ω–∏—é —Ü–µ–Ω—ã
      </div>
      <div class="filter-option" data-sort="new">
        <span>üÜï</span> –ù–æ–≤–∏–Ω–∫–∏
      </div>
    </div>
  </div>
  
  <script>
    // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
    let currentTab = 'market';
    let currentSubtab = 'channels';
    let currentUser = null;
    let walletConnected = false;
    let userBalance = 0;
    
    // –î–∞–Ω–Ω—ã–µ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
    const gifts = {
      channels: [
        { id: 1, name: '–ö–∞–Ω–∞–ª –æ –∫—Ä–∏–ø—Ç–µ', image: 'ü§ñ', price: 5.2, seller: '@crypto_guru' },
        { id: 2, name: '–ú–µ–º—ã –ø—Ä–æ TON', image: 'üòÇ', price: 3.8, seller: '@ton_memes' },
        { id: 3, name: 'NFT –∞—Ä—Ç', image: 'üé®', price: 12.5, seller: '@nft_artist' },
        { id: 4, name: '–ú—É–∑—ã–∫–∞–ª—å–Ω—ã–π –∫–∞–Ω–∞–ª', image: 'üéµ', price: 7.1, seller: '@music_lover' },
        { id: 5, name: '–ö–∞–Ω–∞–ª –æ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è—Ö', image: 'üíª', price: 9.3, seller: '@tech_news' },
        { id: 6, name: '–†–µ—Ü–µ–ø—Ç—ã', image: 'üë®‚Äçüç≥', price: 4.5, seller: '@cook_master' }
      ],
      nft: [
        { id: 7, name: '–ö–æ—Å–º–∏—á–µ—Å–∫–∏–π –∫–æ—Ä–∞–±–ª—å', image: 'üöÄ', price: 25.0, seller: '@space_nft' },
        { id: 8, name: '–î–∏–≥–∏—Ç–∞–ª—å–Ω—ã–π –∞–≤–∞—Ç–∞—Ä', image: 'üë§', price: 15.8, seller: '@avatar_maker' },
        { id: 9, name: '–í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –ø–∏—Ç–æ–º–µ—Ü', image: 'ü¶ä', price: 8.5, seller: '@pet_nft' },
        { id: 10, name: '–ê—Ä—Ç "–ö–∏–±–µ—Ä–ø–∞–Ω–∫"', image: 'üåÜ', price: 30.2, seller: '@cyber_artist' },
        { id: 11, name: '3D —Å–∫—É–ª—å–ø—Ç—É—Ä–∞', image: 'üóø', price: 18.9, seller: '@3d_sculptor' },
        { id: 12, name: '–ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å—Ç–∏–∫–µ—Ä–ø–∞–∫', image: 'üé≠', price: 6.4, seller: '@sticker_creator' }
      ]
    };
    
    const myGifts = {
      selling: [
        { id: 101, name: '–ö–∞–Ω–∞–ª –æ –∫—Ä–∏–ø—Ç–µ', image: 'ü§ñ', price: 5.2, status: 'active' },
        { id: 102, name: 'NFT –∞–≤–∞—Ç–∞—Ä', image: 'üë§', price: 12.0, status: 'active' }
      ],
      bought: [
        { id: 201, name: '–ú—É–∑—ã–∫–∞–ª—å–Ω—ã–π –∫–∞–Ω–∞–ª', image: 'üéµ', price: 7.1, status: 'delivered' }
      ]
    };
    
    // –ú–∞—Å—Å–∏–≤ –ø—Ä–∏–º–µ–Ω–µ–Ω–Ω—ã—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤
    let appliedFilters = {
      models: [],
      minPrice: 1,
      maxPrice: 99999,
      sort: 'asc'
    };
    
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
    document.addEventListener('DOMContentLoaded', function() {
      // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ Telegram WebApp
      if (window.Telegram && Telegram.WebApp) {
        Telegram.WebApp.ready();
        Telegram.WebApp.expand();
        
        currentUser = Telegram.WebApp.initDataUnsafe.user;
        if (currentUser) {
          document.getElementById('user-name').textContent = currentUser.first_name || '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å';
          document.getElementById('user-id').textContent = currentUser.id || '-';
        }
      }
      
      // –ï—Å–ª–∏ –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ Telegram WebApp, –∏—Å–ø–æ–ª—å–∑—É–µ–º –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ
      if (!currentUser) {
        currentUser = {
          id: 123456789,
          first_name: '–î–µ–º–æ',
          username: 'demo_user',
          is_premium: true
        };
        document.getElementById('user-name').textContent = '–î–µ–º–æ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å';
        document.getElementById('user-id').textContent = '123456789';
        document.getElementById('user-registered').textContent = '01.11.2025';
      }
      
      // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞
      updateBalanceDisplay();
      
      // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
      setupEventListeners();
      
      // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –Ω–∞—á–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
      renderGifts(currentSubtab);
    });
    
    // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π
    function setupEventListeners() {
      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –ø–æ –≤–∫–ª–∞–¥–∫–∞–º
      document.querySelectorAll('.nav-item').forEach(item => {
        item.addEventListener('click', function() {
          const tab = this.dataset.tab;
          switchTab(tab);
          
          // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–ª–∏ —Å–∫—Ä—ã–≤–∞–µ–º FAB –∫–Ω–æ–ø–∫—É
          const fabBtn = document.getElementById('fab-btn');
          if (tab === 'my-gifts') {
            fabBtn.classList.remove('hidden');
          } else {
            fabBtn.classList.add('hidden');
          }
        });
      });
      
      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø–æ–¥–≤–∫–ª–∞–¥–æ–∫
      document.querySelectorAll('.subtab').forEach(tab => {
        tab.addEventListener('click', function() {
          document.querySelectorAll('.subtab').forEach(t => t.classList.remove('active'));
          this.classList.add('active');
          currentSubtab = this.dataset.subtab;
          
          if (currentTab === 'market') {
            renderGifts(currentSubtab);
          } else if (currentTab === 'my-gifts') {
            renderMyGifts(currentSubtab);
          }
        });
      });
      
      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ –∑–∞–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
      document.getElementById('modal-close').addEventListener('click', closeModal);
      
      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ FAB
      const fabBtn = document.getElementById('fab-btn');
      if (fabBtn) {
        fabBtn.addEventListener('click', function() {
          document.getElementById('add-channel-modal').classList.add('open');
        });
      }
      
      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω —Ñ–∏–ª—å—Ç—Ä–æ–≤
      document.getElementById('add-channel-close').addEventListener('click', () => {
        document.getElementById('add-channel-modal').classList.remove('open');
      });
      
      document.getElementById('model-close').addEventListener('click', () => {
        document.getElementById('model-modal').classList.remove('open');
      });
      
      document.getElementById('price-close').addEventListener('click', () => {
        document.getElementById('price-modal').classList.remove('open');
      });
      
      document.getElementById('sort-close').addEventListener('click', () => {
        document.getElementById('sort-modal').classList.remove('open');
      });
      
      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤
      document.querySelector('.filters').addEventListener('click', function(e) {
        if (e.target.classList.contains('filter-btn')) {
          const filterType = e.target.textContent;
          if (filterType === '–ú–æ–¥–µ–ª—å') {
            document.getElementById('model-modal').classList.add('open');
          } else if (filterType === '–¶–µ–Ω–∞') {
            document.getElementById('price-modal').classList.add('open');
          } else if (filterType === '–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞') {
            document.getElementById('sort-modal').classList.add('open');
          }
        }
      });
      
      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤—ã–±–æ—Ä–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤
      document.querySelectorAll('.filter-option').forEach(option => {
        option.addEventListener('click', function() {
          document.querySelectorAll('.filter-option').forEach(opt => {
            opt.classList.remove('active');
          });
          this.classList.add('active');
          
          if (this.dataset.sort) {
            appliedFilters.sort = this.dataset.sort;
            updateFiltersDisplay();
            renderGifts(currentSubtab);
          } else if (this.dataset.model) {
            const modelId = this.dataset.model;
            if (appliedFilters.models.includes(modelId)) {
              appliedFilters.models = appliedFilters.models.filter(m => m !== modelId);
            } else {
              appliedFilters.models.push(modelId);
            }
            updateFiltersDisplay();
            renderGifts(currentSubtab);
          }
        });
      });
      
      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–ª–∞–π–¥–µ—Ä–æ–≤ —Ü–µ–Ω
      const minPriceSlider = document.getElementById('min-price');
      const maxPriceSlider = document.getElementById('max-price');
      
      minPriceSlider.addEventListener('input', function() {
        document.getElementById('min-price-value').textContent = `${this.value} TON`;
        if (parseInt(this.value) > parseInt(maxPriceSlider.value)) {
          maxPriceSlider.value = this.value;
          document.getElementById('max-price-value').textContent = `${this.value} TON`;
        }
      });
      
      maxPriceSlider.addEventListener('input', function() {
        document.getElementById('max-price-value').textContent = `${this.value} TON`;
        if (parseInt(this.value) < parseInt(minPriceSlider.value)) {
          minPriceSlider.value = this.value;
          document.getElementById('min-price-value').textContent = `${this.value} TON`;
        }
      });
      
      // –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–∞ —Ü–µ–Ω—ã
      document.getElementById('apply-price').addEventListener('click', function() {
        appliedFilters.minPrice = parseInt(minPriceSlider.value);
        appliedFilters.maxPrice = parseInt(maxPriceSlider.value);
        updateFiltersDisplay();
        renderGifts(currentSubtab);
        document.getElementById('price-modal').classList.remove('open');
      });
      
      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫–æ—à–µ–ª—å–∫–∞
      document.getElementById('connect-wallet-btn').addEventListener('click', function() {
        connectWallet();
      });
      
      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ –∑–∞–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è
      document.getElementById('replenish-close').addEventListener('click', function() {
        document.getElementById('replenish-modal').classList.remove('open');
      });
      
      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞
      document.getElementById('replenish-btn').addEventListener('click', function() {
        openReplenishModal();
      });
      
      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –ø–æ –±–∞–ª–∞–Ω—Å—É –≤ —à–∞–ø–∫–µ
      document.getElementById('header-balance').addEventListener('click', function() {
        openReplenishModal();
      });
      
      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–∞–Ω–∞–ª–∞
      document.getElementById('submit-channel').addEventListener('click', function() {
        const channelLink = document.getElementById('channel-link').value;
        const giftName = document.getElementById('gift-name').value;
        const giftPrice = document.getElementById('gift-price').value;
        
        if (!channelLink || !giftName || !giftPrice) {
          alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è');
          return;
        }
        
        if (parseFloat(giftPrice) < 0.1) {
          alert('–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ - 0.1 TON');
          return;
        }
        
        // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä
        alert(`–ö–∞–Ω–∞–ª "${giftName}" –≤—ã—Å—Ç–∞–≤–ª–µ–Ω –Ω–∞ –ø—Ä–æ–¥–∞–∂—É –∑–∞ ${giftPrice} TON!`);
        document.getElementById('add-channel-modal').classList.remove('open');
        
        // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ñ–æ—Ä–º—É
        document.getElementById('channel-link').value = '';
        document.getElementById('gift-name').value = '';
        document.getElementById('gift-price').value = '';
      });
      
      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤–æ–∑–≤—Ä–∞—Ç–∞ –∏–∑ –∫–æ—à–µ–ª—å–∫–∞
      if (window.Telegram && Telegram.WebApp) {
        Telegram.WebApp.onEvent('back_button_pressed', checkWalletConnection);
      }
      
      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –Ω–∞ –∑–∞—Ç–µ–º–Ω–µ–Ω–Ω—É—é –æ–±–ª–∞—Å—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
      document.getElementById('gift-modal').addEventListener('click', function(e) {
        if (e.target === this) {
          closeModal();
        }
      });
    }
    
    // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫
    function switchTab(tab) {
      // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —ç–∫—Ä–∞–Ω—ã
      document.getElementById('market-screen').classList.add('hidden');
      document.getElementById('my-gifts-screen').classList.add('hidden');
      document.getElementById('activity-screen').classList.add('hidden');
      document.getElementById('profile-screen').classList.add('hidden');
      
      // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —É –≤—Å–µ—Ö –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
      document.querySelectorAll('.nav-item').forEach(item => {
        item.classList.remove('active');
      });
      
      // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–π —ç–∫—Ä–∞–Ω
      if (tab === 'market') {
        document.getElementById('market-screen').classList.remove('hidden');
      } else if (tab === 'my-gifts') {
        document.getElementById('my-gifts-screen').classList.remove('hidden');
        renderMyGifts('selling'); // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø–æ–∫–∞–∑—ã–≤–∞–µ–º "–ù–∞ –ø—Ä–æ–¥–∞–∂–µ"
      } else if (tab === 'activity') {
        document.getElementById('activity-screen').classList.remove('hidden');
      } else if (tab === 'profile') {
        document.getElementById('profile-screen').classList.remove('hidden');
        
        // –ï—Å–ª–∏ —ç—Ç–æ –ø—Ä–æ—Ñ–∏–ª—å, –æ–±–Ω–æ–≤–ª—è–µ–º –±–∞–ª–∞–Ω—Å
        if (walletConnected) {
          document.getElementById('replenish-btn').textContent = '–ü–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å';
        }
      }
      
      // –î–æ–±–∞–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å –∫ —Ç–µ–∫—É—â–µ–º—É –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–æ–º—É —ç–ª–µ–º–µ–Ω—Ç—É
      document.querySelector(`.nav-item[data-tab="${tab}"]`).classList.add('active');
      
      // –û–±–Ω–æ–≤–ª—è–µ–º –∏–∫–æ–Ω–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
      updateNavIcons(tab);
      
      currentTab = tab;
    }
    
    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∫–æ–Ω–æ–∫ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
    function updateNavIcons(activeTab) {
      const icons = {
        market: { inactive: 'market-icon.png', active: 'market-icon-active.png' },
        'my-gifts': { inactive: 'gift-icon.png', active: 'gift-icon-active.png' },
        activity: { inactive: 'activity.png', active: 'activity-active.png' },
        profile: { inactive: 'profile.png', active: 'profile-active.png' }
      };
      
      Object.keys(icons).forEach(tab => {
        const navItem = document.querySelector(`.nav-item[data-tab="${tab}"] .nav-icon img`);
        if (navItem) {
          if (tab === activeTab) {
            navItem.src = icons[tab].active;
          } else {
            navItem.src = icons[tab].inactive;
          }
        }
      });
    }
    
    // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ–¥–∞—Ä–∫–æ–≤
    function renderGifts(subtab) {
      const container = document.getElementById('gifts-container');
      container.innerHTML = '';
      
      let items = gifts[subtab] || [];
      
      // –ü—Ä–∏–º–µ–Ω—è–µ–º —Ñ–∏–ª—å—Ç—Ä—ã
      items = items.filter(item => {
        // –§–∏–ª—å—Ç—Ä –ø–æ —Ü–µ–Ω–µ
        if (item.price < appliedFilters.minPrice || item.price > appliedFilters.maxPrice) {
          return false;
        }
        // –î—Ä—É–≥–∏–µ —Ñ–∏–ª—å—Ç—Ä—ã –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∑–¥–µ—Å—å
        return true;
      });
      
      // –ü—Ä–∏–º–µ–Ω—è–µ–º —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É
      if (appliedFilters.sort === 'asc') {
        items.sort((a, b) => a.price - b.price);
      } else if (appliedFilters.sort === 'desc') {
        items.sort((a, b) => b.price - a.price);
      }
      
      items.forEach(gift => {
        const giftCard = document.createElement('div');
        giftCard.className = 'gift-card';
        giftCard.innerHTML = `
          <div class="gift-image">${gift.image}</div>
          <div class="gift-info">
            <div class="gift-name">${gift.name}</div>
            <div class="gift-price">${gift.price} TON</div>
          </div>
        `;
        giftCard.addEventListener('click', () => openGiftModal(gift, 'buy'));
        container.appendChild(giftCard);
      });
    }
    
    // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ "–ú–æ–∏—Ö –ø–æ–¥–∞—Ä–∫–æ–≤"
    function renderMyGifts(subtab) {
      const container = document.getElementById('my-gifts-container');
      container.innerHTML = '';
      
      let items = myGifts[subtab] || [];
      
      items.forEach(gift => {
        const giftCard = document.createElement('div');
        giftCard.className = 'my-gift-card';
        giftCard.innerHTML = `
          <div class="gift-image">${gift.image}</div>
          <div class="gift-info">
            <div class="gift-name">${gift.name}</div>
            <div class="gift-price">${gift.price} TON</div>
          </div>
          <div class="gift-status">${gift.status === 'active' ? '–ù–∞ –ø—Ä–æ–¥–∞–∂–µ' : '–î–æ—Å—Ç–∞–≤–ª–µ–Ω'}</div>
        `;
        container.appendChild(giftCard);
      });
    }
    
    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–Ω—ã—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤
    function updateFiltersDisplay() {
      const container = document.getElementById('applied-filters');
      container.innerHTML = '';
      
      // –§–∏–ª—å—Ç—Ä—ã –ø–æ –º–æ–¥–µ–ª—è–º
      appliedFilters.models.forEach(modelId => {
        const model = {
          id: modelId,
          name: modelId === 'model1' ? '–†–æ–±–æ—Ç' : modelId === 'model2' ? '–ö–æ—Ç' : '–õ–∏—Å–∞',
          emoji: modelId === 'model1' ? 'ü§ñ' : modelId === 'model2' ? 'üê±' : 'ü¶ä'
        };
        
        const filter = document.createElement('div');
        filter.className = 'applied-filter';
        filter.innerHTML = `<span>${model.emoji}</span>${model.name}<span class="remove-filter" data-model="${model.id}">√ó</span>`;
        container.appendChild(filter);
      });
      
      // –§–∏–ª—å—Ç—Ä –ø–æ —Ü–µ–Ω–µ
      if (appliedFilters.minPrice > 1 || appliedFilters.maxPrice < 99999) {
        const filter = document.createElement('div');
        filter.className = 'applied-filter';
        filter.innerHTML = `üí∞ ${appliedFilters.minPrice} - ${appliedFilters.maxPrice} TON<span class="remove-filter" data-filter="price">√ó</span>`;
        container.appendChild(filter);
      }
      
      // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
      if (appliedFilters.sort !== 'asc') {
        const sortText = appliedFilters.sort === 'desc' ? '–ü–æ —É–±—ã–≤–∞–Ω–∏—é —Ü–µ–Ω—ã' : '–ù–æ–≤–∏–Ω–∫–∏';
        const filter = document.createElement('div');
        filter.className = 'applied-filter';
        filter.innerHTML = `üîç ${sortText}<span class="remove-filter" data-filter="sort">√ó</span>`;
        container.appendChild(filter);
      }
      
      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —É–¥–∞–ª–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤
      document.querySelectorAll('.remove-filter').forEach(btn => {
        btn.addEventListener('click', function(e) {
          e.stopPropagation();
          
          if (this.dataset.model) {
            appliedFilters.models = appliedFilters.models.filter(m => m !== this.dataset.model);
          } else if (this.dataset.filter === 'price') {
            appliedFilters.minPrice = 1;
            appliedFilters.maxPrice = 99999;
            document.getElementById('min-price').value = '1';
            document.getElementById('max-price').value = '100';
            document.getElementById('min-price-value').textContent = '1 TON';
            document.getElementById('max-price-value').textContent = '100 TON';
          } else if (this.dataset.filter === 'sort') {
            appliedFilters.sort = 'asc';
            document.querySelector('.filter-option[data-sort="asc"]').classList.add('active');
            document.querySelector('.filter-option[data-sort="desc"]')?.classList.remove('active');
            document.querySelector('.filter-option[data-sort="new"]')?.classList.remove('active');
          }
          
          updateFiltersDisplay();
          renderGifts(currentSubtab);
        });
      });
    }
    
    // –û—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø–æ–¥–∞—Ä–∫–∞
    function openGiftModal(gift, type) {
      const modal = document.getElementById('gift-modal');
      const modalTitle = document.getElementById('modal-title');
      const modalDescription = document.getElementById('modal-description');
      const modalButtons = document.getElementById('modal-buttons');
      const modalGiftImage = document.getElementById('modal-gift-image');
      
      // –ó–∞–ø–æ–ª–Ω—è–µ–º –¥–∞–Ω–Ω—ã–º–∏
      modalTitle.textContent = gift.name;
      modalDescription.textContent = `–ü—Ä–æ–¥–∞–≤–µ—Ü: ${gift.seller}\n–¶–µ–Ω–∞: ${gift.price} TON`;
      modalGiftImage.textContent = gift.image;
      
      // –û—á–∏—â–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –∫–Ω–æ–ø–∫–∏
      modalButtons.innerHTML = '';
      
      // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞
      if (type === 'buy') {
        const buyBtn = document.createElement('button');
        buyBtn.className = 'modal-btn btn-buy';
        buyBtn.textContent = `–ö—É–ø–∏—Ç—å –∑–∞ ${gift.price} TON`;
        buyBtn.addEventListener('click', () => {
          if (walletConnected) {
            alert('‚úÖ –ü–æ–¥–∞—Ä–æ–∫ —É—Å–ø–µ—à–Ω–æ –∫—É–ø–ª–µ–Ω!');
            closeModal();
          } else {
            alert('–°–Ω–∞—á–∞–ª–∞ –ø–æ–¥–∫–ª—é—á–∏—Ç–µ –∫–æ—à–µ–ª–µ–∫ –¥–ª—è –ø–æ–∫—É–ø–∫–∏');
            closeModal();
            openReplenishModal();
          }
        });
        
        const chatBtn = document.createElement('button');
        chatBtn.className = 'modal-btn btn-secondary';
        chatBtn.textContent = '–ù–∞–ø–∏—Å–∞—Ç—å –ø—Ä–æ–¥–∞–≤—Ü—É';
        chatBtn.addEventListener('click', () => {
          alert(`–û—Ç–∫—Ä—ã–≤–∞–µ–º —á–∞—Ç —Å –ø—Ä–æ–¥–∞–≤—Ü–æ–º: ${gift.seller}`);
          closeModal();
        });
        
        modalButtons.appendChild(buyBtn);
        modalButtons.appendChild(chatBtn);
      } else if (type === 'sell') {
        const editBtn = document.createElement('button');
        editBtn.className = 'modal-btn btn-primary';
        editBtn.textContent = '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å';
        
        const stopBtn = document.createElement('button');
        stopBtn.className = 'modal-btn btn-secondary';
        stopBtn.textContent = '–°–Ω—è—Ç—å —Å –ø—Ä–æ–¥–∞–∂–∏';
        stopBtn.addEventListener('click', () => {
          alert('–ü–æ–¥–∞—Ä–æ–∫ —Å–Ω—è—Ç —Å –ø—Ä–æ–¥–∞–∂–∏');
          closeModal();
        });
        
        modalButtons.appendChild(editBtn);
        modalButtons.appendChild(stopBtn);
      }
      
      // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
      modal.classList.add('open');
    }
    
    // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
    function closeModal() {
      document.getElementById('gift-modal').classList.remove('open');
    }
    
    // –û—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è
    function openReplenishModal() {
      if (walletConnected) {
        // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –ª–æ–≥–∏–∫–∞ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞
        const amount = prompt("–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É –¥–ª—è –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è –≤ TON:");
        if (amount && !isNaN(amount) && parseFloat(amount) > 0) {
          userBalance += parseFloat(amount);
          updateBalanceDisplay();
          alert(`‚úÖ –ë–∞–ª–∞–Ω—Å –ø–æ–ø–æ–ª–Ω–µ–Ω –Ω–∞ ${amount} TON!`);
        }
      } else {
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫–æ—à–µ–ª—å–∫–∞
        document.getElementById('replenish-modal').classList.add('open');
      }
    }
    
    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞
    function updateBalanceDisplay() {
      // –û–±–Ω–æ–≤–ª—è–µ–º –±–∞–ª–∞–Ω—Å –≤ —à–∞–ø–∫–µ
      const balanceElement = document.getElementById('header-balance');
      if (balanceElement) {
        balanceElement.innerHTML = `<span style="background: rgba(255, 10, 155, 1); padding: 4px 10px; border-radius: 15px; font-weight: bold;">+ ${userBalance} TON</span>`;
      }
      
      // –û–±–Ω–æ–≤–ª—è–µ–º –±–∞–ª–∞–Ω—Å –≤ –ø—Ä–æ—Ñ–∏–ª–µ
      const profileBalance = document.getElementById('profile-balance');
      if (profileBalance) {
        profileBalance.textContent = `${userBalance} TON`;
      }
    }
    
    // –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ TON –∫–æ—à–µ–ª—å–∫–∞ (–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è)
    function connectWallet() {
      // –ó–∞–∫—Ä—ã–≤–∞–µ–º –Ω–∞—à–µ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
      document.getElementById('replenish-modal').classList.remove('open');
      
      // –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–∏–π URL –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞
      const currentUrl = encodeURIComponent(window.location.href);
      
      if (window.Telegram && Telegram.WebApp) {
        // –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π URL –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è TON –∫–æ—à–µ–ª—å–∫–∞ –∫–∞–∫ Mini App
        Telegram.WebApp.openTelegramLink(
          `https://t.me/wallet?startattach=tonconnect&tonback=${currentUrl}`
        );
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
        Telegram.WebApp.showAlert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤ –≤–∞—à–µ–º TON –ö–æ—à–µ–ª—å–∫–µ');
      } else {
        // –î–ª—è –¥–µ—Å–∫—Ç–æ–ø–∞
        const walletUrl = `ton://connect?tonback=${currentUrl}`;
        window.open(walletUrl, '_blank');
      }
    }
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫–æ—à–µ–ª—å–∫–∞ –ø–æ—Å–ª–µ –≤–æ–∑–≤—Ä–∞—Ç–∞
    function checkWalletConnection() {
      // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ –±—ç–∫–µ–Ω–¥
      setTimeout(() => {
        walletConnected = true;
        userBalance = 12.50; // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –¥–µ–º–æ-–±–∞–ª–∞–Ω—Å –ø–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
        
        if (window.Telegram && Telegram.WebApp) {
          Telegram.WebApp.showAlert('‚úÖ TON –ö–æ—à–µ–ª–µ–∫ —É—Å–ø–µ—à–Ω–æ –ø–æ–¥–∫–ª—é—á–µ–Ω!');
        }
        
        // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
        updateBalanceDisplay();
        document.getElementById('replenish-btn').textContent = '–ü–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å';
      }, 1500);
    }
  </script>
</body>
</html>